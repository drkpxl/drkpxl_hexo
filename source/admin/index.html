<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DrkPxl Labs Content Manager</title>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>

<body>
    <script>
        window.CMS_MANUAL_INIT = true;
    </script>
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
    <script>
        const init = () => {
            CMS.init({
                config: {
                    load_config_file: false,
                    backend: {
                        name: 'github',
                        repo: 'drkpxl/drkpxl_hexo', // Replace with your repo
                        branch: 'main',
                        base_url: 'https://api.netlify.com'
                    },
                    media_folder: "source/images",
                    media_library: {
                        media_folder: "source/images",
                        public_folder: "/images",
                        clean_accents: true,
                        sanitize_replacement: "-", // Replaces spaces and special chars with hyphens
                        default_transformations: {
                            encode_filenames: true // This will URL-encode filenames
                        }
                    },
                    public_folder: "/images",
                    collections: [
                        {
                            name: "posts",
                            label: "Posts",
                            folder: "source/_posts",
                            create: true,
                            slug: "{{year}}-{{month}}-{{day}}-{{slug}}",
                            fields: [
                                { label: "Title", name: "title", widget: "string" },
                                { label: "Date", name: "date", widget: "datetime" },
                                { label: "Description", name: "description", widget: "string" },
                                { label: "Tags", name: "tags", widget: "list" },
                                { label: "Categories", name: "categories", widget: "list" },
                                { label: "Preview Image", name: "preview", widget: "image", required: false },
                                { label: "Draft", name: "draft", widget: "boolean", default: true },
                                { label: "Body", name: "body", widget: "markdown" }
                            ]
                        }
                    ]
                }
            });
        };
        init();
    </script>
</body>

</html>